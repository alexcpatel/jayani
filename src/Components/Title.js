import React from "react";
import { Transition } from "react-transition-group";
import anime from "animejs";

import "./Styles/Title.scss";

class Title extends React.Component {
  constructor(props) {
    super(props);
    this.state = { animate: false };

    this.titleRef = React.createRef();

    this.animateElements = this.animateElements.bind(this);
  }

  componentDidMount() {
    this.setState({ animate: true });
  }

  animateElements = () => {
    anime({
      targets: this.titleRef.current.querySelectorAll(".st1"),
      easing: "easeOutQuart",
      duration: 10000,
      loop: false,
      delay: (el, index) => index * 400,
      strokeDashoffset: el => {
        var pathLength = 0;
        if (el.getTotalLength) {
          pathLength = el.getTotalLength();
          el.setAttribute("stroke-dasharray", pathLength);
        }
        return [pathLength, 0];
      }
    });
  };

  render() {
    const { animate } = this.state;
    return (
      <div className="title">
        <div className="title-inner">
          <Transition
            in={animate}
            duration={2000}
            timeout={500}
            onEnter={this.animateElements}
            onExit={this.animateElements}
          >
            <svg
              ref={this.titleRef}
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 187 79"
            >
              <path
                className="st1"
                d="m 41.310841,32.862761 v 23.283916 q 0,6.151041 -1.110192,9.961683 -1.110177,3.87065 -4.44074,6.751134 -3.330562,2.880485 -7.891329,3.510596 v -0.510084 q 3.990662,-1.920323 6.511093,-4.590785 2.490414,-2.610426 3.510597,-5.760969 0.990164,-3.120525 0.990164,-8.041345 V 39.553888 q 0,-3.180531 -0.810146,-4.560767 Q 37.200152,33.6129 34.949764,33.13282 v -0.630112 q 4.26072,0.300047 6.361077,0.360053 z m 8.70146,-0.360053 v 0.540087 q -2.340398,0.420074 -3.180531,1.770307 -0.840149,1.380221 -0.840149,4.290709 v 16.712816 q 0,4.140693 0.450077,5.820976 0.390072,1.680282 1.470246,2.850481 -2.100342,0 -3.240538,0.570106 -1.200201,0.600093 -2.970509,2.70045 1.020183,-1.830314 1.440242,-4.080686 0.390072,-2.130361 0.390072,-7.201212 V 32.862761 q 2.430407,-0.06007 6.48109,-0.360053 z"
              />
              <path
                className="st1"
                d="m 58.683758,53.536252 q -1.89032,2.370385 -1.89032,5.190863 0,3.330562 2.340397,5.460922 -1.830313,-0.420074 -3.240537,-1.830313 -1.470261,-1.380221 -1.470261,-3.600606 0,-3.870649 4.260721,-5.220866 z m 19.293254,11.3119 -5.760969,-0.360068 V 48.915463 q 0,-2.370401 -0.450077,-3.480578 -0.510084,-1.140196 -1.770308,-1.950326 2.610441,0.510084 3.5406,1.860301 0.930158,1.380236 0.930158,4.950839 v 9.271565 q 0,2.370401 0.660115,3.390568 0.630096,1.020168 2.850481,1.350218 z m -9.961683,-2.850481 v -7.831323 q -0.990165,-0.119982 -1.680283,-0.119982 -2.3704,0 -3.690615,1.440242 -1.320229,1.470246 -1.320229,3.360566 0,1.710285 1.110192,2.910487 1.140196,1.260208 2.760457,1.260208 1.440242,0 2.820478,-1.020167 z m 0,-9.481603 v -3.180531 q 0,-2.160363 -0.870152,-3.390568 -0.90014,-1.200202 -3.480578,-1.200202 -4.02068,0 -6.781137,3.030516 l -0.750124,-0.720122 q 1.110177,-1.890319 3.510581,-3.120524 2.400404,-1.170199 4.980842,-1.170199 5.610938,0 5.610938,6.121022 v 15.602624 q -1.380221,0.06007 -2.310379,0.360068 l 0.09002,-1.590273 q -1.500248,1.590273 -3.570602,1.590273 -2.370401,0 -3.960659,-1.860316 -1.620276,-1.860317 -1.620276,-4.200715 0,-2.70045 1.980329,-4.620773 1.920323,-1.920323 5.130873,-1.920323 1.020168,0 2.040335,0.270043 z"
              />
              <path
                className="st1"
                d="M 96.010044,75.920013 V 76.4601 L 86.588447,78.380423 93.759655,64.488084 83.58795,48.765447 q -3.210534,-4.920835 -6.631121,-5.490925 v -0.510084 q 1.89032,0.24004 5.460923,0.510084 l 13.802329,21.213562 -3.150544,6.091034 q -0.990164,1.950326 -0.990164,3.150528 0,1.080174 1.020183,1.65028 1.050171,0.600093 2.070339,0.600093 0.119981,0 0.840149,-0.06007 z M 103.87135,49.725609 97.330258,62.297718 84.878162,43.274522 q 4.620788,-0.240041 6.751133,-0.510084 v 0.510084 q -2.190366,0.630096 -2.190366,2.13036 0,0.990165 1.290226,3.000497 l 6.301056,9.721643 4.230719,-8.161373 q 1.41022,-2.820478 1.41022,-3.990677 0,-1.920323 -2.940488,-2.70045 v -0.510084 q -0.119982,0 1.740288,0.150092 2.43042,0.180034 3.84065,0.180034 1.98034,0 4.68079,-0.330049 v 0.510083 q -3.5406,1.41024 -6.12104,6.451087 z"
              />
              <path
                className="st1"
                d="m 114.43313,53.536252 q -1.8903,2.370385 -1.8903,5.190863 0,3.330562 2.34038,5.460922 -1.8303,-0.420074 -3.24054,-1.830313 -1.47024,-1.380221 -1.47024,-3.600606 0,-3.870649 4.2607,-5.220866 z m 19.29326,11.3119 -5.76097,-0.360068 V 48.915463 q 0,-2.370401 -0.45008,-3.480578 -0.51008,-1.140196 -1.77029,-1.950326 2.61042,0.510084 3.54058,1.860301 0.93016,1.380236 0.93016,4.950839 v 9.271565 q 0,2.370401 0.66011,3.390568 0.63012,1.020168 2.85049,1.350218 z m -9.96169,-2.850481 v -7.831323 q -0.99016,-0.119982 -1.68028,-0.119982 -2.3704,0 -3.69062,1.440242 -1.32023,1.470246 -1.32023,3.360566 0,1.710285 1.1102,2.910487 1.14019,1.260208 2.76047,1.260208 1.44024,0 2.82046,-1.020167 z m 0,-9.481603 v -3.180531 q 0,-2.160363 -0.87013,-3.390568 -0.90016,-1.200202 -3.4806,-1.200202 -4.02068,0 -6.78113,3.030516 l -0.75013,-0.720122 q 1.11018,-1.890319 3.51058,-3.120524 2.40041,-1.170199 4.98084,-1.170199 5.61096,0 5.61096,6.121022 v 15.602624 q -1.38024,0.06007 -2.3104,0.360068 l 0.09,-1.590273 q -1.50025,1.590273 -3.5706,1.590273 -2.37039,0 -3.96066,-1.860316 -1.62028,-1.860317 -1.62028,-4.200715 0,-2.70045 1.98033,-4.620773 1.92032,-1.920323 5.13087,-1.920323 1.02017,0 2.04034,0.270043 z"
              />
              <path
                className="st1"
                d="M 161.27102,64.488084 V 49.845621 q 0,-3.0305 -0.42007,-4.380733 -0.39007,-1.230205 -1.92033,-2.190366 2.04034,0.150092 3.27055,1.410239 1.23022,1.290211 1.23022,5.850978 v 6.991174 q 0,2.580438 0.30004,3.660612 0.27005,1.170199 1.26021,2.010348 0.96016,0.870137 2.28039,1.110177 v 0.540102 q -0.99018,-0.09002 -3.30056,-0.24004 -2.28039,-0.119982 -2.70045,-0.119982 z M 142.1878,43.094488 v 21.393596 q -3.09052,0.150093 -5.37089,0.360068 V 64.30805 q 1.35021,-0.450062 2.25037,-1.620261 0.90016,-1.170199 0.90016,-5.610953 v -7.38123 q 0,-3.000513 -0.69012,-4.440755 -0.72012,-1.350233 -2.91049,-1.980329 v -0.510084 q 1.41024,0.180019 5.82097,0.33005 z m 2.13037,21.393596 V 43.094488 q 1.59027,-0.06007 2.4004,-0.150093 l -0.21004,1.590273 q 3.75064,-1.89032 6.96117,-1.89032 2.07036,0 3.5406,1.020168 1.44024,1.050186 1.8003,2.370401 0.36007,1.350233 0.36007,4.380748 v 14.072358 q -1.23021,0.06007 -2.40041,0.180034 0.21004,-3.750637 0.21004,-5.250885 V 49.84556 q 0,-2.940491 -0.84015,-4.140693 -0.87014,-1.230205 -3.12053,-1.230205 -2.4004,0 -6.51109,1.980329 v 12.212056 q 0,4.800808 3.5406,5.640941 v 0.540103 q -3.6006,-0.360068 -5.73096,-0.360068 z"
              />
              <path
                className="st1"
                d="M 176.87365,57.526913 V 43.094488 h 2.25037 v 14.882503 q 0,5.460922 3.81064,5.460922 1.23021,0 2.01033,-0.480081 v 0.660115 q -1.53025,1.260208 -3.36056,1.260208 -1.68028,0 -2.82048,-1.020167 -1.2302,-1.050187 -1.53025,-2.310395 -0.36005,-1.260208 -0.36005,-4.02068 z m -4.23072,-0.510084 V 43.094488 h 2.25037 V 58.067 q 0,3.300559 0.66012,4.710798 0.63011,1.470246 2.10035,2.100357 h -0.93015 q -2.01034,-0.900155 -3.06052,-2.520431 -1.02017,-1.590258 -1.02017,-5.340895 z m 1.1702,-23.914028 4.2307,3.930671 -1.44024,1.500248 -4.2007,-3.900652 z m 2.79046,-3.000497 4.20071,3.930656 -1.41024,1.500263 -4.23071,-3.900667 z"
              />
            </svg>
          </Transition>
        </div>
      </div>
    );
  }
}

export default Title;
